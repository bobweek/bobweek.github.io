class Cell{constructor(s,i,e,t,h){this.species=[0,0,0],this.picColor=[0,0,0],this.vidColor=[0,0,0],this.av_species=[0,0,0],this.prev_species=[0,0,0],this.position=[0,0],this.bore_count=0,this.boring=10,this.species[0]=s,this.species[1]=i,this.species[2]=e,this.prev_species[0]=this.species[0],this.prev_species[1]=this.species[1],this.prev_species[2]=this.species[2],this.position[0]=t,this.position[1]=h}render(){fill(this.species[0],this.species[1],this.species[2]),rect(this.position[0]*width/wid,this.position[1]*height/hi,width/wid+2,height/hi+2)}set(s,i,e){this.species[0]=s,this.species[1]=i,this.species[2]=e}update(s){c=0;for(let s=0;s<3;s++)this.picColor[s]=0,this.vidColor[s]=0,this.av_species[s]=0,this.prev_species[s]=this.species[s];for(let i=0;i<3;i++)this.av_species[i]+=s[(wid+this.position[0]-1)%wid][(hi+this.position[1])%hi].species[i];for(let i=0;i<3;i++)this.av_species[i]+=s[(wid+this.position[0]+1)%wid][(hi+this.position[1])%hi].species[i];for(let i=0;i<3;i++)this.av_species[i]+=s[(wid+this.position[0])%wid][(hi+this.position[1]+1)%hi].species[i];for(let i=0;i<3;i++)this.av_species[i]+=s[(wid+this.position[0])%wid][(hi+this.position[1]-1)%hi].species[i];for(let s=0;s<3;s++)this.av_species[s]/=4;for(let s=0;s<3;s++){this.species[s]+=m[s]*(this.av_species[s]-this.species[s])+Gamma[s]*(theta((this.position[0]+1)*width/wid,(this.position[1]+1)*height/hi,s)-this.species[s]);for(let i=0;i<3;i++)this.species[s]+=M[i][s]*(this.species[i]-this.species[s])}switch(e){case 1:for(let s=0;s<3;s++)this.species[s]>255&&(this.species[s]=255),this.species[s]<0&&(this.species[s]=0);break;case 2:for(let s=0;s<3;s++)this.species[s]=(255+this.species[s])%255;break;case 3:for(let s=0;s<3;s++)this.species[s]=255/(1+exp(-1*loge*(this.species[s]-127)));break;case 4:for(let s=0;s<3;s++)this.species[s]>255&&(this.species[s]=510-this.species[s]),this.species[s]<0&&(this.species[s]=-this.species[s])}}}