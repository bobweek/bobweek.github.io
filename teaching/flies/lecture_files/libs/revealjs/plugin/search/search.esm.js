/*!
 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
 * by navigatating to that slide and highlighting it.
 *
 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
 */
const e=()=>{function e(){i=document.createElement("div"),i.classList.add("searchbox"),i.style.position="absolute",i.style.top="10px",i.style.right="10px",i.style.zIndex=10,i.innerHTML='<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>\n\t\t</span>',r=i.querySelector(".searchinput"),r.style.width="240px",r.style.fontSize="14px",r.style.padding="4px 6px",r.style.color="#000",r.style.background="#fff",r.style.borderRadius="2px",r.style.border="0",r.style.outline="0",r.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",r.style["-webkit-appearance"]="none",o.getRevealElement().appendChild(i),r.addEventListener("keyup",function(e){13===e.keyCode?(e.preventDefault(),function(){if(d){var e=r.value;""===e?(c&&c.remove(),s=null):(c=new l("slidecontent"),s=c.apply(e),a=0)}s&&(s.length&&s.length<=a&&(a=0),s.length>a&&(o.slide(s[a].h,s[a].v),a++))}(),d=!1):d=!0},!1),n()}function t(){i||e(),i.style.display="inline",r.focus(),r.select()}function n(){i||e(),i.style.display="none",c&&c.remove()}function l(e,t){var n=document.getElementById(e)||document.body,l=t||"EM",i=new RegExp("^(?:"+l+"|SCRIPT|FORM)$"),r=["#ff6","#a0ffff","#9f9","#f99","#f6f"],s=[],a=0,d="",c=[];this.setRegex=function(e){e=e.trim(),d=new RegExp("("+e+")","i")},this.getRegex=function(){return d.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(e){if(null!=e&&e&&d&&!i.test(e.nodeName)){if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)this.hiliteWords(e.childNodes[t]);var n,p;if(3==e.nodeType&&(n=e.nodeValue)&&(p=d.exec(n))){for(var u=e;null!=u&&"SECTION"!=u.nodeName;)u=u.parentNode;var h=o.getIndices(u),f=c.length,y=!1;for(t=0;t<f;t++)c[t].h===h.h&&c[t].v===h.v&&(y=!0);y||c.push(h),s[p[0].toLowerCase()]||(s[p[0].toLowerCase()]=r[a++%r.length]);var g=document.createElement(l);g.appendChild(document.createTextNode(p[0])),g.style.backgroundColor=s[p[0].toLowerCase()],g.style.fontStyle="inherit",g.style.color="#000";var v=e.splitText(p.index);v.nodeValue=v.nodeValue.substring(p[0].length),e.parentNode.insertBefore(g,v)}}},this.remove=function(){for(var e,t=document.getElementsByTagName(l);t.length&&(e=t[0]);)e.parentNode.replaceChild(e.firstChild,e)},this.apply=function(e){if(null!=e&&e)return this.remove(),this.setRegex(e),this.hiliteWords(n),c}}let o,i,r,s,a,d,c;return{id:"search",init:l=>{o=l,o.registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",function(l){"F"==l.key&&(l.ctrlKey||l.metaKey)&&(l.preventDefault(),i||e(),"inline"!==i.style.display?t():n())},!1)},open:t}};export{e as default};