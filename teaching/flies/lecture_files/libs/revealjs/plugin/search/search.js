!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RevealSearch=t()}(this,function(){"use strict";
/*!
	 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
	 * by navigatating to that slide and highlighting it.
	 *
	 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
	 */return()=>{function e(){l=document.createElement("div"),l.classList.add("searchbox"),l.style.position="absolute",l.style.top="10px",l.style.right="10px",l.style.zIndex=10,l.innerHTML='<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>\n\t\t</span>',r=l.querySelector(".searchinput"),r.style.width="240px",r.style.fontSize="14px",r.style.padding="4px 6px",r.style.color="#000",r.style.background="#fff",r.style.borderRadius="2px",r.style.border="0",r.style.outline="0",r.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",r.style["-webkit-appearance"]="none",i.getRevealElement().appendChild(l),r.addEventListener("keyup",function(e){13===e.keyCode?(e.preventDefault(),function(){if(d){var e=r.value;""===e?(c&&c.remove(),s=null):(c=new o("slidecontent"),s=c.apply(e),a=0)}s&&(s.length&&s.length<=a&&(a=0),s.length>a&&(i.slide(s[a].h,s[a].v),a++))}(),d=!1):d=!0},!1),n()}function t(){l||e(),l.style.display="inline",r.focus(),r.select()}function n(){l||e(),l.style.display="none",c&&c.remove()}function o(e,t){var n=document.getElementById(e)||document.body,o=t||"EM",l=new RegExp("^(?:"+o+"|SCRIPT|FORM)$"),r=["#ff6","#a0ffff","#9f9","#f99","#f6f"],s=[],a=0,d="",c=[];this.setRegex=function(e){e=e.trim(),d=new RegExp("("+e+")","i")},this.getRegex=function(){return d.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(e){if(null!=e&&e&&d&&!l.test(e.nodeName)){if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)this.hiliteWords(e.childNodes[t]);var n,f;if(3==e.nodeType&&(n=e.nodeValue)&&(f=d.exec(n))){for(var u=e;null!=u&&"SECTION"!=u.nodeName;)u=u.parentNode;var p=i.getIndices(u),h=c.length,y=!1;for(t=0;t<h;t++)c[t].h===p.h&&c[t].v===p.v&&(y=!0);y||c.push(p),s[f[0].toLowerCase()]||(s[f[0].toLowerCase()]=r[a++%r.length]);var g=document.createElement(o);g.appendChild(document.createTextNode(f[0])),g.style.backgroundColor=s[f[0].toLowerCase()],g.style.fontStyle="inherit",g.style.color="#000";var v=e.splitText(f.index);v.nodeValue=v.nodeValue.substring(f[0].length),e.parentNode.insertBefore(g,v)}}},this.remove=function(){for(var e,t=document.getElementsByTagName(o);t.length&&(e=t[0]);)e.parentNode.replaceChild(e.firstChild,e)},this.apply=function(e){if(null!=e&&e)return this.remove(),this.setRegex(e),this.hiliteWords(n),c}}let i,l,r,s,a,d,c;return{id:"search",init:o=>{i=o,i.registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",function(o){"F"==o.key&&(o.ctrlKey||o.metaKey)&&(o.preventDefault(),l||e(),"inline"!==l.style.display?t():n())},!1)},open:t}}});